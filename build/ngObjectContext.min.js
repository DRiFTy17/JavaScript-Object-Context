(function(e){"use strict";e.module("ngObjectContext",[]).provider("objectContext",function(){var t=true;var n=null;var r="ObjectDataType";var i="ObjectKeyFields";var s=null;var o=[];var u;this.allowMultipleInstances=function(e){t=!e};this.setServiceUri=function(e){if(e.substring(e.length-1)!=="/"){e+="/"}n=e};this.setObjectTypePropertyName=function(e){r=e};this.setObjectKeyPropertyName=function(e){i=e};this.$get=["$rootScope",function(a){var f=[];var l=function(e){e=typeof e!=="undefined"?!!e:true;if(t){if(!s){s=new ObjectContext;s.setServiceUri(n);s.setObjectTypePropertyName(r);s.setObjectKeyPropertyName(i);s.addIgnoredProperties([r,i,"ExtensionData"]);if(e){f.push({contextInstance:s,deregisterWatchFn:a.$watch(function(){s.evaluate()})})}}}else{var o=new ObjectContext;o.setServiceUri(n);o.setObjectTypePropertyName(r);o.setObjectKeyPropertyName(i);o.addIgnoredProperties([r,i,"ExtensionData"]);if(e){f.push({contextInstance:o,deregisterWatchFn:a.$watch(function(){s.evaluate()})})}return o}return s};var c=function(e){e=typeof e!=="undefined"?!!e:true;return s||this.create(e)};var h=function(e){for(var t=f.length-1;t>=0;t--){if(f[t].contextInstance===e&&f[t].deregisterWatchFn){f[t].deregisterWatchFn();f.splice(t,1)}}};var p=function(e){if(!e){throw new Error("Invalid context instance specified.")}var t=false;for(var n=0;n<f.length;n++){if(f[n].contextInstance===e){t=true}}if(!t&&e.evaluate){f.push({contextInstance:e,deregisterWatchFn:a.$watch(function(){e.evaluate()})})}};var d=function(e,t){u=t;o=o.concat(e)};var v=function(t){for(var n=0;n<o.length;n++){var r=o[n];if(r.hasOwnProperty(u)&&r[u]===t){var i=e.copy(r);delete i[u];return i}}return null};return{create:l,getInstance:c,stopAutoWatch:h,startAutoWatch:p,cacheTypes:d,getTypeInstance:v,haveTypesBeenLoaded:function(){return o.length>0}}}]})})(window.angular)